<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Socket Group Chat</title>
    <link rel="shortcut icon" href="https://i.pinimg.com/originals/a6/06/25/a60625748a61e88e4ae17d53bc286910.png"
        type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="max-w-7xl shadow-md p-5 mx-auto min-h-[100vh] reletive">
    <img class="w-12 h-12 block mx-auto" src="https://img.icons8.com/color/2x/chat--v3.gif" alt="">
    <h2 class="text-center text-xl font-bold text-blue-700">Socket Group Chat</h2>
    <p class="text-sm text-gray-500 font-bold text-center">Simple Group Chat app by Kamruzzaman Mayed</p>
    <p class="text-sm text-gray-500 font-bold text-center text-blue-400">

        <a target="_blank" href="https://github.com/zamanmayed1/Socket-Chat">View Code</a>
        ||
        <a target="_blank" href="https://github.com/zamanmayed1">Follow me on Github</a>
    </p>

    <hr class="my-2">

    <div class="w-full h-[55vh] overflow-y-scroll shadow-sm  rounded-md p-5 my-10">
        <ul id="history">
        </ul>


    </div>





    </div>


    <div class="flex  justify-center ">
        <input id="message" required placeholder="Aa" class=" border focus:ring-indigo-500 focus:border-indigo-500 block w-3/4 md:w-2/4 pl-7 pr-12
            border-gray-300 text-xl rounded-md px-3 py-2 " type=" text">
        <button onclick="sendMessage()"
            class="px-5 py-3 hover:bg-blue-900 bg-blue-500 font-bold text-white mx-3 rounded-md">Send</button>

    </div>







    <!-- Socket Setup -->

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        const sendMessage = () => {
            let message = document.getElementById('message').value
            if (message != '') {
                socket.emit('chat', message)
            }
        }

        socket.on('chatShow', (data) => {
            let display = document.getElementById('history')
            let chat = document.createElement('li')
            chat.innerHTML =
                `
                <li class="list-none px-3 my-2 inline-block py-2 font-bold bg-blue-100 rounded-lg">${data}</li>
            `
            display?.appendChild(chat)
            let message = document.getElementById('message').value = ''
            history.scrollTop = history.scrollHeight;

        })
    </script>
</body>

</html>